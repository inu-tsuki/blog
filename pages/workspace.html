<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月晦</title>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
    <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
    <script src="https://unpkg.com/turndown-plugin-gfm/dist/turndown-plugin-gfm.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/font/iconfont.css">
    <script src="https://cdn.tiny.cloud/1/hn0hxwtgyzauckjlcwkt46mqj6xbix9eiwbbjwbj28271c4d/tinymce/7/tinymce.min.js"
        referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

</head>

<body>
    <!-- 头部 -->
    <header class="site-header">
        <div class="header-content">
            <h1>月晦</h1>
            <p>床前明月光</p>
        </div>
    </header>

    <!-- 导航栏 -->
    <nav class="main-nav">
        <ul>
            <li><a href="index.html">月华庭</a></li>
            <li><a href="archive.html">月明</a></li>
            <li><a href="workspace.html">月晦</a></li>
            <li><a href="post.html?id=1751731200000">月影</a></li>
        </ul>
    </nav>
    <!-- 主体内容 -->
    <main id="workspace" class="main-content">

        <div id="workspace-tabs" class="workspace-tabs">
            <button class="workspace-tab active" data-target="post-management-section">文章管理</button>
            <button class="workspace-tab" data-target="category-manager-section">分区管理</button>
        </div>

        <div class="workspace-content">
            <section id="post-management-section" class="workspace-section active">
                <h2>文章管理
                </h2>
                <div id="management-filters-wrapper"> <!-- 可以复用 archive 的粘性包裹器样式 -->

                    <!-- 分类筛选标签页 -->
                    <div class="management-tabs workspace-tabs">
                        <button class="management-tab workspace-tab active" data-category-id="all">全部分类</button>
                        <!-- JS 动态填充其他分类 -->
                    </div>

                    <!-- === 筛选控件 === -->
                    <div id="add-filter-control" class="sort-and-search-controls add-filter-control">
                        <!-- === 高级搜索构建器 === -->
                        <div class="search-container">
                            <!-- 文本搜索框 -->
                            <input type="search" id="search-input" class="search-input" placeholder="搜索标题和内容...">
                        </div>
                        <div class="sort-container">
                            <select id="sort-by-select">
                                <option value="date">发布时间</option>
                                <option value="votes">点赞数</option>
                                <option value="views">浏览数</option>
                                <option value="comments">评论数</option>
                            </select>
                            <select id="order-by-select">
                                <option value="asc">升序</option>
                                <option value="desc">降序</option>
                            </select>
                        </div>
                        <!-- 添加高级筛选的“+”按钮 -->
                        <button id="add-filter-btn" class="action-btn">+</button>
                        <!-- UI构建器将在这里动态弹出 -->

                    </div>
                    <div class="filter-status-container hidden">
                        <!-- 结构化筛选条件的“胶囊”容器 -->

                        <div id="filter-pills-container" class="filter-pills-container">
                            <span id="active-filer" class="active-filters-container"></span>
                            <!-- JS会在这里填充筛选条件胶囊 -->
                        </div>
                    </div>
                    
                </div>


                <div id="post-management-grid" class="post-management-grid">
                    <!-- JS会在这里填充管理卡片 -->
                </div>
            </section>

            <section id="category-manager-section" class="workspace-section">
                <h2>分区管理</h2>
                <div id="category-manager">
                    <div class="category-list-container">
                        <!-- JS会在这里填充已存在的分区 -->
                    </div>
                    <form id="new-category-form" class="inline-form">

                    </form>
                </div>
            </section>

            <section id="post-editor-section" class="workspace-section">
                <h2 id="editor-title"></h2> <!-- 标题将由JS动态改变 -->
                <div class="editor-pane">
                    <form id="new-post-form" class="workspace-form">
                        <div>
                            <input type="text" id="post-title" placeholder="文章标题">
                        </div>
                        <div>
                            <input type="text" id="post-image-url" placeholder="头图url链接 e.g: https://img.com/150.jpg">
                        </div>
                        <div>
                            <select id="post-category" required></select>
                        </div>
                        <div>
                            <input type="text" id="post-tags" placeholder="标签，用逗号分隔 (e.g. 前端,CSS,JavaScript)">
                        </div>

                        <div class="editor-choice-wrapper">
                            <label>编辑器：</label>
                            <select id="editor-choice">
                                <option value="tinymce">富文本 (TinyMCE)</option>
                                <option value="markdown">Markdown (EasyMDE)</option>
                            </select>
                        </div>

                        <div id="editor-wrapper">
                            <textarea id="post-content" rows="8"></textarea>
                        </div>
                    </form>
                </div>


                <div class="preview-controls-and-area">

                    <div class="preview-toggle-wrapper">

                    </div>

                    <div class="preview-pane" id="preview-pane">
                        <div id="live-preview" class="post-full-content">
                            <h1 id="preview-title"></h1>
                            <hr>
                            <img class="preview-image" style="display: none;">
                            <div id="preview-content" class="markdown-body"></div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <div class="footer-toolbar">
        <div class="toolbar-content">
        </div>
    </div>

<!--     <button id="back-to-top" title="返回顶部">↑</button>
 -->

    <!-- 页脚 -->
    <footer class="site-footer">
        <p>2025 月华庭</p>
    </footer>



    <!-- 脚本 -->
    <script src="../js/main.js"></script>
    <!-- 链接卡片模板 -->
    <div id="link-preview-card" class="link-preview-card">
        <!-- 内容将由JS动态填充 -->
    </div>

    <!-- === 全局底部弹出通知容器 === -->
    <div id="toast-notification" class="toast-notification">
        <span id="toast-message"></span>
    </div>
</body>

</html>